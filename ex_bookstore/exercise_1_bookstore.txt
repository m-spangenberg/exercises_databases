# CREATE DATA TABLES
create table books(bookid bigserial primary key, booktitle varchar(240));
create table writers(writerid bigserial primary key, first_name varchar(240), last_name varchar(240));

# CREATE JUNCTION TABLE
create table authors (bookid int references books(bookid), writerid int references writers(writerid));

# INSERT BOOKS DATA
insert into books (booktitle) values ('Life of Pi');
insert into books (booktitle) values ('Whitethorn');
insert into books (booktitle) values ('Meditations: A New Translation');
insert into books (booktitle) values ('The 48 Laws of Power');
insert into books (booktitle) values ('The Art Of War');
insert into books (booktitle) values ('Database Guru');

# INSERT WRITERS DATA
insert into writers (first_name, last_name) values ('Yann', 'Martel');
insert into writers (first_name, last_name) values ('Bryce', 'Courtenay');
insert into writers (first_name, last_name) values ('Marcus', 'Aurelius');
insert into writers (first_name, last_name) values ('Robert', 'Greene');
insert into writers (first_name, last_name) values ('Sun', 'Tzu');

# INSERT WRITERS DATA
insert into writers (first_name, last_name) values ('Jimmy', 'Droptables');
insert into writers (first_name, last_name) values ('Jane', 'Droptables');

# INSERT AUTHORS DATA
insert into authors (bookid, writerid) values (2, 1);
insert into authors (bookid, writerid) values (3, 2);
insert into authors (bookid, writerid) values (4, 3);
insert into authors (bookid, writerid) values (5, 4);
insert into authors (bookid, writerid) values (6, 6);
insert into authors (bookid, writerid) values (6, 7);
insert into authors (bookid, writerid) values (1, 5);

# DELETE FROM AUTHORS AND WRITERS TABLE
delete from authors where writerid = 6;
delete from writers where writerid = 6;

# UPDATE WRITERS TABLE
update writers set last_name = 'Hadersville' WHERE writerid = 7;

# QUERY BOOK TITLE FROM WRITER ID
SELECT books.booktitle
FROM books
JOIN authors ON (books.bookid = authors.bookid)
JOIN writers ON (authors.writerid = writers.writerid)
WHERE writers.writerid = 2;

# QUERY BOOK TITLE FROM WRITER NAME
SELECT books.booktitle
FROM books
JOIN authors ON (books.bookid = authors.bookid)
JOIN writers ON (authors.writerid = writers.writerid)
WHERE (writers.first_name) = 'Marcus';